<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生合影展示</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction: column;
            flex-direction: column;
            -ms-flex-pack: start;
            justify-content: flex-start;
            -ms-flex-align: center;
            align-items: center;
            min-height: 100vh;
            padding: 15px;
        }
        .image-container {
            border: 5px solid white;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            max-width: 100%;
            -ms-flex-positive: 1;
            flex-grow: 1;
            min-height: 80vh;
            box-sizing: border-box;
            margin: 0 auto 15px;
            padding: 5px;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-align: center;
            align-items: center;
            -ms-flex-pack: center;
            justify-content: center;
            position: relative;
        }
        .image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .download-btn {
            display: block;
            width: 120px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            background-color: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 0 auto;
            transition: background-color 0.3s;
        }
        .download-btn:hover {
            background-color: #45a049;
        }
        .version-text {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px 10px;
            border-radius: 3px;
            -ms-border-radius: 3px;
            margin-bottom: 15px;
            align-self: flex-start;
        }
        
    </style>
</head>
<body>
    <div class="version-text">学生合影展示V1.0正式版</div>
    <div class="image-container">
        <img src="classroom.jpg" alt="学生合影" onload="this.style.display='block'" onerror="this.alt='图片加载失败'; this.removeAttribute('onerror');">
    </div>
    <a href="classroom.jpg" download="学生合影.jpg" class="download-btn" onclick="showDownloadMessage(event)">下载图片</a>
    <script>
        // 确保DOM加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            window.showDownloadMessage = function(event) {
                // 兼容Edge的下载提示
                // 检测所有Edge版本(包括Chromium内核)和IE
                if (/Edge\//.test(navigator.userAgent) || /Trident\//.test(navigator.userAgent) || /Edg\//.test(navigator.userAgent)) {
                    event.preventDefault();
                    var link = document.createElement('a');
                    link.href = 'classroom.jpg';
                    link.download = '学生合影.jpg';
                    document.body.appendChild(link);
                    // 给浏览器一点时间处理元素
                    setTimeout(() => {
                        link.click();
                        // 移除元素前也给一点时间
                        setTimeout(() => {
                            document.body.removeChild(link);
                        }, 100);
                    }, 0);
                    setTimeout(() => {
                        alert('图片下载已开始，请在浏览器下载中心查看进度。');
                    }, 100);
                } else {
                    setTimeout(() => {
                        alert('图片下载已开始，请在浏览器下载中心查看进度。');
                    }, 100);
                }
            };
        });
    </script>
</body>
</html>